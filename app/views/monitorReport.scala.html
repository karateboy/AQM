@* periodReport Template File *@
@(title: String)

@outline(title){
	<div class="row">
		<div class="col-lg-12">
			<h1 class="page-header">監測報表</h1>
		</div>
	</div>
	<div class="row">
    	<div class="col-lg-12">
    		<div class="panel-group" id="accordion">
        	<div class="panel panel-primary" id="paramPanel">
            	<div class="panel-heading panel-title" >
            		<a data-toggle="collapse" data-parent="#accordion" href="#reportParam">報表參數</a>	
                </div>
            	<div class="panel-body panel-collapse in" id="reportParam">
            		<h5>測站</h5>
            		<div class="btn-group" data-toggle="buttons">
            			@for(m<-Monitor.values.toList){
            				<label class="btn btn-default">
								<input type="radio" name="monitor" id="@m">@Monitor.getDisplayName(m)</label>		
            			}
            		</div>
					<h5>報表種類</h5>
					<div class="btn-group" data-toggle="buttons">
						<label class="btn btn-default">
							<input type="radio" name="reportType" id="@PeriodReport.DailyReport">日報</label>
						<label class="btn btn-default">
							<input type="radio" name="reportType" id="@PeriodReport.MonthlyReport">月報</label>
						<label class="btn btn-default">
							<input type="radio" name="reportType" id="@PeriodReport.YearlyReport">年報</label>
					</div>
					<h5>查詢日期</h5>
					<div class="col-lg-2 input-group date">
  						<input type="text" class="form-control" id="reportDate" required>
  							<span class="input-group-addon">
  								<i class="glyphicon glyphicon-th"></i>
  							</span>
					</div>
					</br>
					<div>
						<button type="button" class="btn btn-primary" id="queryReport">查詢</button>
					</div>
            	</div>
        	</div>
        	<div class="panel panel-success" style="display:none" id="reportPanel">
            	<div class="panel-heading panel-title"" >
            		<a data-toggle="collapse" data-parent="#accordion" href="#monitorReport">監測報表</a>	
                </div>
            	<div class="panel-body panel-collapse" id="monitorReport">
					<div id="reportTitle" align="center">
					<h2>監測日報表</h2>
					</div>
            		<table id="reportTable" class="display" cellspacing="0" width="100%">
            		</table>            		
            	</div>
            </div>
        	</div> <!-- end of panel group -->
    	</div>
	</div>
	<script>
	$( document ).ready(function() {
		$('#reportDate').datepicker({
			format: 'yyyy-mm-dd',
		    todayBtn: "linked",
		    language: "zh-TW"
		});

		var monitor, reportType, reportDate;
		
		function validate(){
			monitor = $("input[name='monitor']:checked").attr('id');
			if (!monitor) {
				alert('請選擇測站');
				return false;
			}
			reportType = $("input[name='reportType']:checked").attr('id');
			if (!reportType) {
				alert('請選擇報表種類');
				return false;
			}
			reportDate = $('#reportDate').val();
			if(reportDate.length === 0){
				alert('請選擇報表日期');
				return false;
			}
			
			return true;
		}
		
		var dataSet = [
		               ['00:00', '1.0', '3.5', '7.9', '4.9', '5.2','6.1', '1.7', '2.8','3.9', '10.9', 
		               		'13.0', '2.9', '4.8', '7.7', '6.5','2.5', '4.4', '5.3','7.2', '9.1',
		               		'12.7', '1.2', '4.3', '5.4', '6.5'
		               ],
		               ['01:00', '14.3', '2.2', '4.3', '4.6', '2.5','3.6', '5.7', '7.8','9.9', '1.9', 
		               		'3.1', '4.2', '6.3', '2.4', '2.5','3.6', '3.7', '5.8','7.9', '10.2',
		               		'1.3', '2.2', '5.3', '6.4', '7.5'
		               ],
		               ['02:00', '12.2', '2.4', '4.3', '4.4', '5.5','6.6', '6.7', '6.8','8.9', '7.1', 
		               		'7.1', '8.2', '6.3', '6.4', '5.5','7.6', '5.7', '4.8','6.9', '8.1',
		               		'1.3', '2.3', '3.3', '4.4', '4.5'
		               ],
		               ['03:00', '1.5', '5.2', '5.3', '7.4', '5.7','7.6', '3.7', '3.8','3.9', '1.5', 
		               		'1.2', '2.2', '2.3', '4.2', '3.5','3.6', '7.3', '3.8','4.9', '1.5',
		               		'4.1', '2.4', '4.3', '4.4', '4.5'
		               ],
					   ['04:00', '3.0', '3.3', '3.9', '5.9', '2.5','5.1', '3.7', '3.8','7.9', '1.9', 
		               		'3.0', '5.9', '4.5', '5.7', '8.5','8.5', '7.4', '7.3','4.2', '2.1',
		               		'2.0', '1.2', '4.3', '5.4', '7.5'
		               ],
		               ['05:00', '14.3', '2.2', '4.3', '4.6', '2.5','3.6', '5.7', '7.8','9.9', '1.9', 
		               		'3.1', '4.2', '6.3', '2.4', '2.5','3.6', '3.7', '5.8','7.9', '10.2',
		               		'1.3', '2.2', '5.3', '6.4', '7.5'
		               ],
		               ['06:00', '12.2', '2.4', '4.3', '4.4', '5.5','6.6', '6.7', '6.8','8.9', '7.1', 
		               		'7.1', '8.2', '6.3', '6.4', '5.5','7.6', '5.7', '4.8','6.9', '8.1',
		               		'1.3', '2.3', '3.3', '4.4', '4.5'
		               ],
		               ['07:00', '1.5', '5.2', '5.3', '7.4', '5.7','7.6', '3.7', '3.8','3.9', '1.5', 
		               		'1.2', '2.2', '2.3', '4.2', '3.5','3.6', '7.3', '3.8','4.9', '1.5',
		               		'4.1', '2.4', '4.3', '4.4', '4.5'
		               ],
					   ['08:00', '3.0', '3.3', '3.9', '5.9', '2.5','5.1', '3.7', '3.8','7.9', '1.9', 
		               		'3.0', '5.9', '4.5', '5.7', '8.5','8.5', '7.4', '7.3','4.2', '2.1',
		               		'2.0', '1.2', '4.3', '5.4', '7.5'
		               ],
		               ['09:00', '1.0', '3.5', '7.9', '4.9', '5.2','6.1', '1.7', '2.8','3.9', '10.9', 
		               		'13.0', '2.9', '4.8', '7.7', '6.5','2.5', '4.4', '5.3','7.2', '9.1',
		               		'12.7', '1.2', '4.3', '5.4', '6.5'
		               ],
		               ['10:00', '14.3', '2.2', '4.3', '4.6', '2.5','3.6', '5.7', '7.8','9.9', '1.9', 
		               		'3.1', '4.2', '6.3', '2.4', '2.5','3.6', '3.7', '5.8','7.9', '10.2',
		               		'1.3', '2.2', '5.3', '6.4', '7.5'
		               ],
		               ['11:00', '12.2', '2.4', '4.3', '4.4', '5.5','6.6', '6.7', '6.8','8.9', '7.1', 
		               		'7.1', '8.2', '6.3', '6.4', '5.5','7.6', '5.7', '4.8','6.9', '8.1',
		               		'1.3', '2.3', '3.3', '4.4', '4.5'
		               ],
		               ['12:00', '12.2', '2.4', '4.3', '4.4', '5.5','6.6', '6.7', '6.8','8.9', '7.1', 
		               		'7.1', '8.2', '6.3', '6.4', '5.5','7.6', '5.7', '4.8','6.9', '8.1',
		               		'1.3', '2.3', '3.3', '4.4', '4.5'
		               ],
		               ['13:00', '1.5', '5.2', '5.3', '7.4', '5.7','7.6', '3.7', '3.8','3.9', '1.5', 
		               		'1.2', '2.2', '2.3', '4.2', '3.5','3.6', '7.3', '3.8','4.9', '1.5',
		               		'4.1', '2.4', '4.3', '4.4', '4.5'
		               ],
					   ['14:00', '3.0', '3.3', '3.9', '5.9', '2.5','5.1', '3.7', '3.8','7.9', '1.9', 
		               		'3.0', '5.9', '4.5', '5.7', '8.5','8.5', '7.4', '7.3','4.2', '2.1',
		               		'2.0', '1.2', '4.3', '5.4', '7.5'
		               ],
		               ['15:00', '14.3', '2.2', '4.3', '4.6', '2.5','3.6', '5.7', '7.8','9.9', '1.9', 
		               		'3.1', '4.2', '6.3', '2.4', '2.5','3.6', '3.7', '5.8','7.9', '10.2',
		               		'1.3', '2.2', '5.3', '6.4', '7.5'
		               ],
		               ['16:00', '12.2', '2.4', '4.3', '4.4', '5.5','6.6', '6.7', '6.8','8.9', '7.1', 
		               		'7.1', '8.2', '6.3', '6.4', '5.5','7.6', '5.7', '4.8','6.9', '8.1',
		               		'1.3', '2.3', '3.3', '4.4', '4.5'
		               ],
		               ['17:00', '1.5', '5.2', '5.3', '7.4', '5.7','7.6', '3.7', '3.8','3.9', '1.5', 
		               		'1.2', '2.2', '2.3', '4.2', '3.5','3.6', '7.3', '3.8','4.9', '1.5',
		               		'4.1', '2.4', '4.3', '4.4', '4.5'
		               ],
					   ['18:00', '3.0', '3.3', '3.9', '5.9', '2.5','5.1', '3.7', '3.8','7.9', '1.9', 
		               		'3.0', '5.9', '4.5', '5.7', '8.5','8.5', '7.4', '7.3','4.2', '2.1',
		               		'2.0', '1.2', '4.3', '5.4', '7.5'
		               ],
		               ['19:00', '1.0', '3.5', '7.9', '4.9', '5.2','6.1', '1.7', '2.8','3.9', '10.9', 
		               		'13.0', '2.9', '4.8', '7.7', '6.5','2.5', '4.4', '5.3','7.2', '9.1',
		               		'12.7', '1.2', '4.3', '5.4', '6.5'
		               ],
		               ['20:00', '14.3', '2.2', '4.3', '4.6', '2.5','3.6', '5.7', '7.8','9.9', '1.9', 
		               		'3.1', '4.2', '6.3', '2.4', '2.5','3.6', '3.7', '5.8','7.9', '10.2',
		               		'1.3', '2.2', '5.3', '6.4', '7.5'
		               ],
		               ['21:00', '14.3', '2.2', '4.3', '4.6', '2.5','3.6', '5.7', '7.8','9.9', '1.9', 
		               		'3.1', '4.2', '6.3', '2.4', '2.5','3.6', '3.7', '5.8','7.9', '10.2',
		               		'1.3', '2.2', '5.3', '6.4', '7.5'
		               ],
		               ['22:00', '12.2', '2.4', '4.3', '4.4', '5.5','6.6', '6.7', '6.8','8.9', '7.1', 
		               		'7.1', '8.2', '6.3', '6.4', '5.5','7.6', '5.7', '4.8','6.9', '8.1',
		               		'1.3', '2.3', '3.3', '4.4', '4.5'
		               ],
		               ['23:00', '1.5', '5.2', '5.3', '7.4', '5.7','7.6', '3.7', '3.8','3.9', '1.5', 
		               		'1.2', '2.2', '2.3', '4.2', '3.5','3.6', '7.3', '3.8','4.9', '1.5',
		               		'4.1', '2.4', '4.3', '4.4', '4.5'
		               ]

		           ];
        
		$('#queryReport').click(function(){
			if(!validate())
				return;

			$("#reportPanel").css('display','block');
			$("#reportParam").collapse();
			$("#reportPanel").collapse('show');

			var obj = {
				'monitor':monitor,
				'reportType':reportType,
				'startTime':reportDate
			};

			console.log(JSON.stringify(obj));
			
			$.ajax({
				url: "/monitorReport",
				data: JSON.stringify(obj),
				contentType: "application/json; charset=utf-8",
				type: "POST",
				dataType: "json",
				success: function(json){
				},
				error: function(xhr, status, errorThrown){
					console.log("錯誤訊息:" + status + "-" + errorThrown);
				},

				complete: function(xhr, status){
				}					
			});
			
			
			$('#reportTable').dataTable( {
				language: {
					url: '@routes.Assets.at("localization/zh_tw.json")'
				},
		        "data": dataSet,
		        "columns": [
		        	{ "title": "時間", "class": "left"},
		            { "title": "PM10" },
		            { "title": "PM2.5" },
		            { "title": "二氧化硫", },
		            { "title": "氮氧化物", },
		            { "title": "一氧化碳", },
		            { "title": "周界臭氧", },
		            { "title": "碳氫化物", },
		            { "title": "一氧化氮", },
		            { "title": "甲烷", },
		            { "title": "二氧化氮", },
		            { "title": "非甲烷 ", },
		            { "title": "風速", },
		            { "title": "風向", },
		            { "title": "雨量", },
		            { "title": "溫度", },
		            { "title": "濕度", },
		            { "title": "大氣", }     
		        ]
		    } );  
			
		});
	});
	</script>
}

